<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>B·∫£n Tin Th·∫ßy Khang Academy</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;700;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Lexend", sans-serif;
        background: #f0f2f5;
        margin: 0;
        padding: 15px;
      }
      .container {
        max-width: 500px;
        margin: 0 auto;
      }
      .post-card {
        background: white;
        border-radius: 20px;
        overflow: hidden;
        margin-bottom: 25px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
      .post-img {
        width: 100%;
        display: block;
        height: auto;
        border-bottom: 1px solid #eee;
      }
      .post-body {
        padding: 20px;
      }
      .post-title {
        font-size: 1.25rem;
        font-weight: 800;
        color: #1c1e21;
        margin-bottom: 10px;
        text-transform: uppercase;
      }
      .post-desc {
        color: #4b4f56;
        line-height: 1.6;
        font-size: 1rem;
        white-space: pre-wrap;
      }
      .loading {
        text-align: center;
        padding: 50px;
        color: #00bcd4;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2 style="text-align: center; color: #00bcd4; margin-bottom: 30px">
        üì∞ B·∫¢N TIN TR·ª∞C TUY·∫æN
      </h2>
      <div id="feed" class="loading">
        ƒêang k·∫øt n·ªëi kho d·ªØ li·ªáu Th·∫ßy Khang...
      </div>
    </div>

    <script>
      // Link Google Sheets c·ªßa Th·∫ßy (ƒê√£ ·ªü ƒë·ªãnh d·∫°ng tsv)
      const SHEET_LINK =
        "https://docs.google.com/spreadsheets/d/e/2PACX-1vTu4-aq3yRoxi2Pdobbkvbl9awUlGxD5PNcMkyA4KxZVxxwIJarWhWynmckU_q9KUJ4DQQxGxzrnYEs/pub?output=tsv";

      async function loadData() {
        const feed = document.getElementById("feed");
        try {
          const res = await fetch(SHEET_LINK);
          const text = await res.text();
          // Chia h√†ng v√† b·ªè d√≤ng ti√™u ƒë·ªÅ
          const rows = text.split("\n").slice(1);

          let html = "";
          // ƒê·∫£o ng∆∞·ª£c ƒë·ªÉ tin m·ªõi nh·∫•t hi·ªán l√™n ƒë·∫ßu
          rows.reverse().forEach((row) => {
            const cols = row.split("\t"); // T√°ch c·ªôt b·∫±ng ph√≠m Tab
            if (cols.length >= 3 && cols[0].trim() !== "") {
              html += `
                        <div class="post-card">
                            <img src="${cols[2].trim()}" class="post-img" onerror="this.src='https://placehold.co/600x400?text=Thay+Khang+Academy'">
                            <div class="post-body">
                                <div class="post-title">${cols[0]}</div>
                                <div class="post-desc">${cols[1]}</div>
                            </div>
                        </div>`;
            }
          });
          feed.innerHTML =
            html ||
            "<p style='text-align:center;'>Ch∆∞a c√≥ tin ƒëƒÉng n√†o trong kho d·ªØ li·ªáu.</p>";
        } catch (e) {
          feed.innerHTML =
            "<p style='text-align:center; color:red;'>L·ªói k·∫øt n·ªëi. Th·∫ßy ki·ªÉm tra l·∫°i link Google Sheets nh√©!</p>";
        }
      }
      loadData();
    </script>
  </body>
</html>
